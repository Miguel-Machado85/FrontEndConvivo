<div class="gestionar-reserva-vecino-page">
    <div class="header-section">
        <h1>Gestionar Reservas</h1>
        <p>Administra tus reservas futuras</p>
    </div>
    <div class="reservas-list-section">
        <div class="reserva-card" *ngFor="let reserva of reservas">
            <div class="reserva-card-header">
                <div class="reserva-card-icon" style="background: linear-gradient(135deg, #1268c4 0%, #155dfc 100%);">
                    <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M30 15C30 22.4895 21.6915 30.2895 18.9015 32.6985C18.6416 32.8939 18.3252 32.9996 18 32.9996C17.6748 32.9996 17.3584 32.8939 17.0985 32.6985C14.3085 30.2895 6 22.4895 6 15C6 11.8174 7.26428 8.76516 9.51472 6.51472C11.7652 4.26428 14.8174 3 18 3C21.1826 3 24.2348 4.26428 26.4853 6.51472C28.7357 8.76516 30 11.8174 30 15Z"
                            stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" />
                        <path
                            d="M18 19.5C20.4853 19.5 22.5 17.4853 22.5 15C22.5 12.5147 20.4853 10.5 18 10.5C15.5147 10.5 13.5 12.5147 13.5 15C13.5 17.4853 15.5147 19.5 18 19.5Z"
                            stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </div>
                <div class="reserva-card-title-group">
                    <div class="reserva-card-title">{{reserva.espacio?.nombre}}</div>
                    <div class="reserva-card-desc">{{reserva.espacio?.descripcion}}</div>
                </div>
                <div class="reserva-card-status activa">{{reserva.estadoReserva}}</div>
            </div>
            <div class="reserva-card-details">
                <div class="reserva-card-detail">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8 2V6" stroke="#1268C4" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <path d="M16 2V6" stroke="#1268C4" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <path
                            d="M19 4H5C3.89543 4 3 4.89543 3 6V20C3 21.1046 3.89543 22 5 22H19C20.1046 22 21 21.1046 21 20V6C21 4.89543 20.1046 4 19 4Z"
                            stroke="#1268C4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M3 10H21" stroke="#1268C4" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                    <span>{{reserva.fecha}}</span>
                </div>
                <div class="reserva-card-detail">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 6V12L16 14" stroke="#1268C4" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <path
                            d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"
                            stroke="#1268C4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <span>{{reserva.horaInicio}} - {{reserva.horaFin}}</span>
                </div>
            </div>
            <div class="reserva-card-actions">
                <button class="modificar-btn" (click)="openModificarPopup(reserva)">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M21.1739 6.81189C21.7026 6.28332 21.9997 5.56636 21.9998 4.81875C21.9999 4.07113 21.703 3.3541 21.1744 2.82539C20.6459 2.29668 19.9289 1.99961 19.1813 1.99951C18.4337 1.99942 17.7166 2.29632 17.1879 2.82489L3.84193 16.1739C3.60975 16.4054 3.43805 16.6904 3.34193 17.0039L2.02093 21.3559C1.99509 21.4424 1.99314 21.5342 2.01529 21.6217C2.03743 21.7092 2.08285 21.7891 2.14673 21.8529C2.21061 21.9167 2.29055 21.962 2.37809 21.984C2.46563 22.006 2.55749 22.0039 2.64393 21.9779L6.99693 20.6579C7.3101 20.5626 7.59511 20.392 7.82693 20.1609L21.1739 6.81189Z"
                            stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    Modificar
                </button>
                <button class="anular-btn" (click)="openAnularPopup(reserva)">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"
                            stroke="#E7000B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M15 9L9 15" stroke="#E7000B" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <path d="M9 9L15 15" stroke="#E7000B" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                    Anular
                </button>
            </div>
        </div>


        <app-anular-popup *ngIf="showAnularPopup" [reserva]="selectedReserva" (closePopup)="closeAnularPopup()"
            (confirmAnular)="confirmAnularReserva($event.id!)">
        </app-anular-popup>

        <app-modificar-popup *ngIf="showModificarPopup" [reserva]="selectedReserva" (closePopup)="closeModificarPopup()"
            (confirmModificar)="confirmModificarReserva($event)">
        </app-modificar-popup>